{% extends 'jdLayout.html.twig' %}
{% block body %}
    <article>
        <div>
            <br/>
            <img class="img-rounded" src="{{ oiseau.url }}" alt="{{ oiseau.lbNom  }}" style="width: 55%; height: 35%"/>
            <h3>{{ oiseau.lbNom  }}</h3>
            <div class="meta">
                Découvert par {{ oiseau.lbAuteur }}  <strong> reference:</strong>
                {{ oiseau.cdRef }}
            </div>
        </div>
    </article>
    <section id="observations">
            {% for observation in oiseau.observation %}
                <h5>{{ observation.nom  }}</h5>
                <div class="meta">
                    Coordonnées GPS {{ observation.coordonneesGps }} Laissée le {{ observation.createdAt | date('d/m/Y') }}
                </div>

            {% endfor %}
        {% if app.user %}

            <div class="col-lg-8">

            <h4>Laissé une observation !</h4>
                <button onclick="locate()" class="btn btn-info">Générer mes coodonnées GPS</button><br>
            <label id="location"></label>
            {{ form_start(formObservation) }}
            {{ form_row(formObservation.nom,{'attr':{'placeholder':"Nom d'observation"}}) }}
            {{ form_row(formObservation.coordonneesGps,{'attr':{'placeholder':"Coordonnées Gps",'class':'gps'}}) }}
            {{ form_row(formObservation.photo,{'attr':{'placeholder':"la photo de l'observation",'required':'false'}}) }}
            <button type="submit" class="btn btn-success">
                Enregistrer
            </button>
            {{ form_end(formObservation) }}
        </div>
    {% else %}
        Pour laisser une observation vous devez vous  <a href="{{ path('loginUsers') }}" class="btn btn-success">Connecter</a>
        {% endif %}
    </section>
    <script src="https://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
    <script>
        function locate() {
    navigator.geolocation.getCurrentPosition(function(position){
    document.querySelector(".gps").value = position.coords.latitude + " " + position.coords.longitude;
    });
    }</script>
{% endblock %}